apiVersion: apps.gitlab.com/v1beta1
kind: GitLab
metadata:
  name: gitlab
spec:
  chart:
    values:
      certmanager:
        install: false
      prometheus:
        install: false
      global:
        hosts:
          domain: apps.${CLUSTER_BASE_DOMAIN}
        ingress:
          annotations:
            route.openshift.io/termination: edge
          class: none
          configureCertmanager: false
          tls:
            enabled: false
        omniauth:
          enabled: true
          autoSignInWithProvider: oidc-keycloak
          syncProfileFromProvider: ["oidc-keycloak"]
          syncProfileAttributes: ['email']
          allowSingleSignOn: ["oidc-keycloak"]
          blockAutoCreatedUsers: false
          autoLinkLdapUser: false
          autoLinkSamlUser: false
          autoLinkUser: ["oidc-keycloak"]
          externalProviders: []
          allowBypassTwoFactor: ["oidc-keycloak"]
          providers: 
          - secret: "oidc-keycloak"            
      nginx-ingress:
        enabled: false
    version: 7.9.3